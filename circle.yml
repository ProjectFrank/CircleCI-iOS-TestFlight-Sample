machine:
  pre:
    - curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.25.4/install.sh | bash
  environment:
    XCODE_SCHEME: CircleCI-Sample
    XCODE_WORKSPACE: CircleCI-Sample.xcworkspace
    DEVELOPER_NAME: 'iPhone Distribution: Takahiro Horikawa (HSM2AYDCY3)'
    APPNAME: CircleCI-Sample
    PROFILE_UUID: 30fc0261-b07e-421a-8b11-ae29168827d2
    TESTFLIGHT_DIST_LIST: your-dist-list-name
  post:
    - rm ~/$CIRCLE_PROJECT_REPONAME/package.json
    - sudo bash -c "printf '127.0.0.1       local.jackpocket.com\n' >> /etc/hosts"
    - cat /etc/hosts
  node:
    version: 0.10.22
  java:
    version: openjdk7
  xcode:
    version: 6.4
deployment:
  testflight:
    branch: master
    commands:
      - ./scripts/add-key.sh
      - ./scripts/testflight.sh
      - ./scripts/remove-key.sh
